{% extends 'base.html' %}

{% block title %}social의 detail{% endblock %} <!--얘는 그 head 에 쓰는 타이틀이에요-->

{% block content %}
    <p>social의 detail</p>
    <a href="{% url 'social:edit' post.id %}">수정하기</a>
    <a href="{% url 'social:delete' post.id %}">삭제하기</a>
    <a href="{% url 'social:index' %}">목록으로</a>
    <h1>제목:{{post.title|safe}}</h1>
    <p>수정날짜:{{post.updated_at|safe}}</p>
    <h2>내용:{{post.content|safe}}</h2>
    <hr>
 
    {% for firstcomment in firstcomments %}

        {% if firstcomment.text != '삭제된 댓글입니다' %}
            <a href="{% url 'social:delete_comment' post.id firstcomment.id %}">삭제하기</a>
            <input type="button" value="답글달기" onclick="reComment('{{firstcomment.id}}', 'social', '{{ csrf_token }}');">
        {% endif %}
        {{ firstcomment.text }}
        
        <br>
            {% for secondcomment in secondcomments %}
                {% if secondcomment.parent == firstcomment.id %}
                <a href="{% url 'social:delete_comment' post.id secondcomment.id %}">삭제하기</a>
                    &nbsp&nbsp⇒{{ secondcomment.text }}<br>
                {% endif %}
            {% endfor %}
        <div id="{{firstcomment.id}}form"></div>
    {% endfor %}

    <form action="{% url 'social:addComment' post.id %}" method="POST">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="댓글쓰기">
    </form>


{% endblock %}